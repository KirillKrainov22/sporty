# Sporty — командный проект (микросервисы)
## Описание проекта

**Sporty** — сервис для трекинга спортивных активностей с элементами геймификации.  
Пользователь взаимодействует с системой через **Telegram-бот** и **веб-дашборд**, данные обрабатываются через **Backend API**, а расчёт очков и достижений выполняется асинхронно через **Kafka + worker**.

Проект выполнен в формате **микросервисной архитектуры** и полностью разворачивается в **Docker**.

---

## Для кого и какую проблему решаем

### Проблема
- сложно поддерживать мотивацию к регулярным тренировкам;
- нет наглядного прогресса;
- отсутствует соревновательный элемент.

### Решение
- учёт тренировок;
- очки, уровни, достижения;
- рейтинги и друзья;
- аналитика и графики прогресса.


---

## Архитектура системы

### Компоненты  
(каждый компонент разворачивается в отдельном контейнере)

- **Telegram Bot** — aiogram, inline-клавиатуры  
- **Web Dashboard** — Streamlit, Plotly  
- **Backend API** — FastAPI, SQLAlchemy, REST  
- **PostgreSQL** — основная база данных  
- **Kafka** — брокер событий  
- **Analytics Worker** — обработка событий и бизнес-логики  

### Взаимодействие компонентов

- Telegram-бот и Web Dashboard общаются **только через REST API**
- Backend API отправляет события в **Kafka**
- Worker читает события из Kafka и обновляет данные в **PostgreSQL**
- Прямого доступа к базе данных у бота и веба **нет**

Наружу доступны **только Telegram-бот и Web-интерфейс**.  
Все остальные сервисы работают **внутри Docker-сети**.

---

## Запуск проекта

### 1. Подготовка окружения
```bash
git clone https://github.com/KirillKrainov22/sporty
cd sporty
cp .env.example .env
```


### 2. Запуск всех сервисов

```bash
docker-compose up
```

Проект запускается **одной командой**, без ручной настройки.

---

## Переменные окружения (.env)

```env
DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/sporty
BOT_TOKEN=***
API_BASE_URL=http://api:8000
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
ADMIN_TOKEN=***
```

* все креды используются **только через `.env`**
* токены и пароли **не логируются**

---

## Надёжность и безопасность

* обработка ошибок при недоступности БД / API / Kafka
* отсутствие SQL-инъекций (ORM, валидация входных данных)
* база данных не проброшена наружу
* взаимодействие сервисов только через REST-контракты